<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 
    <head>
        <title>Application Indicators</title>
        <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    
        <script type="text/javascript" src="/common/core/mootools.js"></script>
        <script type="text/javascript" src="/common/core/cream.js"></script>

        <link rel="stylesheet" type="text/css" href="/common/ui/melange.css" media="screen">
        <style type="text/css">
        .item {
            float: left;
            margin: 2px;
            border-radius: 5px;
        }

        #item-container img {
            width: 32px;
            height: 32px;
        }

        .item-hover {
            margin-top: -5px;
            margin-bottom: 9px;
        }
        </style>

        <script language="javascript">
        function add_item(item) {
            i = document.createElement('div');
            i.className = 'item';
            i.id = item['id']
            $('item-container').appendChild(i);

            icon = document.createElement('img');
            icon.src = item['icon'];
            i.appendChild(icon)

            i.set('morph', {duration: 500, transition: 'bounce:out'});
            i.addEvent('mouseenter', function() {
                this.morph('.item-hover');
                });
            i.addEvent('mouseleave', function() {
                this.morph('.item');
                });
            i.addEvent('click', function() {
                widget.api.appindicators.show_menu(this.id);
                });
            }

        function remove_item(id) {
            $('item-container').removeChild($(id));
            }

        function change_item(item) {
            $(item['id']).innerHTML = '';
            icon = document.createElement('img');
            icon.src = item['icon'];
            $(item['id']).appendChild(icon)
            }

        function main() {
            widget.api.addEvent('item-added', add_item)
            widget.api.addEvent('item-changed', change_item)
            widget.api.addEvent('item-removed', remove_item)
            widget.api.appindicators.get_items(function(items) {
                for(c=0; c<items.length; c++) {
                    add_item(items[c]);
                    }
                })
            }
        </script>
    </head>
 
    <body>
        <div class="widget" style="min-width: 180px;">
            <div class="background">
                <div id="item-container">
                </div>
                <div style="clear: both;"></div>
            </div>
        </div>
    </body>
 
</html>
